(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8350:function(e,t,r){Promise.resolve().then(r.bind(r,8354))},8354:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});for(var s,n=r(7437),a=r(1169),l=r(7138),c=r(2265),i=r(4867),o=r(7430),u=r(9354),x={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},d=new Uint8Array(16),m=[],h=0;h<256;++h)m.push((h+256).toString(16).slice(1));var p=function(e,t,r){if(x.randomUUID&&!t&&!e)return x.randomUUID();var n=(e=e||{}).random||(e.rng||function(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(d)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return function(e,t=0){return(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase()}(n)},f=r(2776),g=r(4681),j=r.n(g);let y=!1,b=()=>{y||(j().init("db23a9c3b81c14a0cd0f778e7549ac1a",{track_pageview:!0,persistence:"localStorage"}),y=!0)},D=(e,t)=>{try{if(b(),!y){console.error("mp not initialized");return}j().track(e,t)}catch(e){console.error("mp error",e)}};function N(){var e;let[t,r]=(0,c.useState)(0),[s,x]=(0,c.useState)(!1),[d,m]=(0,c.useState)("paper"),[h,g]=(0,c.useState)(""),[j,y]=(0,c.useState)(!1),b=Array.from({length:1},(e,t)=>({emoji:"\uD83E\uDEA8",text:"rock".concat(0===t?"":t+1)})),[N,w]=(0,c.useState)(()=>b),[v,S]=(0,c.useState)(!1),[E,C]=(0,c.useState)(0),[k,_]=(0,c.useState)("paper always covers rock. duh!"),[R,O]=(0,c.useState)("GUESS"),[F,I]=(0,c.useState)(()=>p()),L=(0,a.useRouter)();(0,o.O)(()=>{y(!0)});let U=async()=>{if(s||!d)return;if(N.find(e=>e.text.trim().toLowerCase()===d.trim().toLowerCase())){alert("no repeats! try something else");return}if(!d.trim()){alert("type something");return}if(/\d/.test(d)){alert("I'm bad at numbers");return}if(/"/.test(d)){alert("pls no quotes lol");return}if(new RegExp(u.Vg).test(d)){alert("emoji?? \uD83E\uDEE0");return}if(d.length>280){alert("280 chars max");return}if(new RegExp(u.Ym).test(d)){alert("no funny business");return}x(!0),S(!1),C(0);let e=await fetch("/api/vs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prev:N[N.length-1].text,guess:d,gid:F})}).finally(()=>x(!1));if(504===e.status){alert("sorry, request took too long! try again in a few seconds"),D(u.f_);return}let{data:t,error:n}=await e.json().finally(()=>x(!1));if(n||!t){console.error("submission failed",n),n===u.BP&&alert("sorry, try again in a few seconds"),n===u.$q&&alert("rate limit exceeded! slow down or dm us on discord/twitter"),n===u.qw&&alert("\uD83E\uDEE3"),n===u.nV&&alert("sorry, try again in a few seconds"),n===u.SH&&alert("weird guess, try a different one?");return}if(D(u.KI),_(t.reason),w(e=>[...e,{emoji:t.guess_emoji||"❓",text:d}]),t.cached&&t.cache_count&&C(t.cache_count),t.guess_wins){if(r(e=>e+1),O("CORRECT"),!1===t.cached){var a;S(!0);let e=JSON.parse(null!==(a=localStorage.getItem("trophies"))&&void 0!==a?a:"[]");e.push(JSON.stringify({guess:{text:d,emoji:t.guess_emoji},prev:{text:N[N.length-1].text,emoji:N[N.length-1].emoji}})),localStorage.setItem("trophies",JSON.stringify(e))}}else O("LOSS")},A=async e=>{let{score:t,text:r,initials:n}=e;if(s)return;if(!n){alert("enter initials!");return}if((n=n.trim()).length<1){alert("1 letter min!");return}if(n.length>3){alert("3 letters max!");return}x(!0),C(0);let a=await fetch("/api/scores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:t,text:r,initials:n,gid:F})}).finally(()=>x(!1));if(504===a.status){alert("sorry, request took too long! try again in a few seconds"),D(u.f_);return}let{error:l}=await a.json().finally(()=>x(!1));if(l){l===u.wC?alert("pick something else!"):alert("sorry! try again in a few seconds");return}D(u.a_),L.push("/leaderboard")};return(0,n.jsx)("div",{className:"font-comic h-dvh mx-4 sm:mx-32 md:mx-48 lg:mx-72 xl:mx-96",children:(0,n.jsxs)("div",{className:"flex flex-col pb-12 w-full items-center ".concat("GUESS"===R?"top-[35%] sm:top-1/4":"top-[7%]"," justify-start relative"),children:["GUESS"===R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl",children:"what beats"}),(0,n.jsxs)("p",{className:"text-2xl text-center",children:[N[N.length-1].text,"?"]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("p",{className:"text-[120px] sm:text-[200px] ".concat(s?"animate-swell":""),children:N[N.length-1].emoji}),s&&(0,n.jsx)("p",{className:"absolute transition-transform top-[40%] left-[80%] transform -translate-x-1/2 -translate-y-1/2",style:s?{transform:"rotate(".concat(12,"deg) scale(",1.3,")")}:{},children:d}),s&&(0,n.jsx)("p",{className:"absolute transition-transform top-[20%] left-[20%] transform -translate-x-1/2 -translate-y-1/2",style:s?{transform:"rotate(".concat(36,"deg) scale(",3,")")}:{},children:d}),s&&(0,n.jsx)("p",{className:"absolute transition-transform top-[60%] left-[20%] transform -translate-x-1/2 -translate-y-1/2",style:s?{transform:"rotate(".concat(-45,"deg) scale(",5,")")}:{},children:d})]}),("scissors"===N[N.length-1].text.toLowerCase()||"scissor"===N[N.length-1].text.toLowerCase())&&(0,n.jsx)("div",{className:"flex flex-row pb-2",children:(0,n.jsx)("div",{className:"text-gray-400",children:(0,n.jsx)("p",{children:'try "fire," "diamond," or "hammer"'})})}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(null==d?void 0:d.trim())&&U()},children:[(0,n.jsx)("input",{autoFocus:"paper"!==d,className:"pl-4 py-4 text-lg border border-1-black",defaultValue:null!=d?d:void 0,disabled:s,placeholder:"paper"===N[N.length-1].text?"scissors":"scissors"===N[N.length-1].text.toLowerCase()||"scissor"===N[N.length-1].text.toLowerCase()?"anything, get creative":"",onChange:e=>{m(e.target.value)}}),(0,n.jsx)("button",{type:"submit",className:"p-4 border border-1-black text-lg ".concat(!s&&(null==d?void 0:d.trim())?"bg-green-200":"text-gray-400"),disabled:s||!(null==d?void 0:d.trim()),children:"GO"})]}),(0,n.jsxs)("p",{className:"text-gray-500 py-2",children:["score: ",t," ",1===N.length&&"rock"===N[N.length-1].text.toLowerCase()&&(0,n.jsx)(l.default,{href:"/leaderboard",className:"underline",children:"(see leaderboard)"})]}),1===N.length&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(f.P,{})})}),j&&1===N.length&&"rock"===N[N.length-1].text.toLowerCase()&&localStorage.getItem("trophies")&&(0,n.jsxs)("div",{className:"mt-8 flex flex-col items-center justify-center px-4",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"\uD83C\uDFC6 you were the first to beat"}),JSON.parse(null!==(e=localStorage.getItem("trophies"))&&void 0!==e?e:"[]").map((e,t)=>(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("p",{children:[JSON.parse(e).prev.text+" "+JSON.parse(e).prev.emoji," ",(0,n.jsx)("span",{className:"text-gray-400",children:"with"})," ",JSON.parse(e).guess.text+" "+JSON.parse(e).guess.emoji]})},e+t.toString()))]}),N.length>1&&(0,n.jsxs)("div",{className:"mb-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-center",children:"Already guessed:"})}),(0,n.jsx)("p",{className:"text-center",children:N.reduce((e,t,r)=>0===r?t.text:"".concat(t.text," \uD83E\uDD1C ").concat(e),"")})]})]}),"CORRECT"===R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl sm:text-5xl pb-2 text-center",children:N[N.length-1].text}),(0,n.jsx)("p",{className:"text-3xl sm:text-5xl pb-2 text-green-400 text-center",children:"beats"}),(0,n.jsx)("p",{className:"text-3xl sm:text-5xl pb-8 text-center",children:N[N.length-2].text}),(0,n.jsx)("p",{className:"text-lg text-center pb-4 text-pretty",children:k}),v?(0,n.jsx)("div",{className:"flex flex-row items-center justify-center bg-green-200 rounded-md p-1",children:(0,n.jsxs)("p",{className:"text-center px-2",children:["\uD83C\uDFC6 you are the 1st person to beat"," ",(0,n.jsxs)("span",{className:"font-black underline",children:[N[N.length-2].text," ",N[N.length-2].emoji]})," ","with"," ",(0,n.jsxs)("span",{className:"font-black underline",children:[N[N.length-1].text," ",N[N.length-1].emoji]})]})}):(0,n.jsx)("div",{className:"flex flex-row items-center justify-center bg-green-200 rounded-md p-1",children:(0,n.jsxs)("p",{className:"text-center px-2",children:["\uD83E\uDDE0 great minds think alike: ",E," others guessed this too!"]})}),(0,n.jsx)("p",{className:"text-gray-300 mt-2",children:"whatbeatsrock.com"}),(0,n.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,n.jsx)("p",{className:"text-[140px]",children:N[N.length-1].emoji}),(0,n.jsx)("p",{className:"text-4xl px-6",children:"\uD83E\uDD1C"}),(0,n.jsx)("p",{className:"text-[140px]",children:N[N.length-2].emoji})]}),(0,n.jsx)("button",{className:"py-4 px-8 border border-1-black text-lg",onClick:()=>{_(""),m(null),O("GUESS")},autoFocus:!0,children:"next"}),(0,n.jsxs)("p",{className:"text-gray-500 py-2",children:["score: ",t]}),N.length>1&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-center",children:"Already guessed:"})}),(0,n.jsx)("p",{className:"text-center",children:N.reduce((e,t,r)=>0===r?t.text:"".concat(t.text," \uD83E\uDD1C ").concat(e),"")})]})]}),"LOSS"===R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("p",{className:"text-center text-3xl sm:text-5xl pb-2",children:N[N.length-1].text}),(0,n.jsx)("p",{className:"text-center text-3xl sm:text-5xl pb-2 text-red-400",children:"does not beat"}),(0,n.jsx)("p",{className:"text-center text-3xl sm:text-5xl pb-4",children:N[N.length-2].text}),E>0&&(0,n.jsx)("div",{className:"mb-4 flex flex-row items-center justify-center bg-red-200 rounded-md p-1",children:(0,n.jsxs)("p",{className:"text-center px-2",children:["\uD83E\uDD26‍♀️ ",E," other"," ",1===E?"person":"people"," already tried this"]})}),(0,n.jsx)("p",{className:"text-lg text-center pb-4 text-pretty",children:k}),(0,n.jsx)("p",{className:"text-gray-300 text-center",children:"whatbeatsrock.com"})]}),(0,n.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,n.jsx)("p",{className:"text-[140px]",children:N[N.length-1].emoji}),(0,n.jsx)("p",{className:"text-4xl px-6",children:"\uD83D\uDE35"}),(0,n.jsx)("p",{className:"text-[140px]",children:N[N.length-2].emoji})]}),(0,n.jsx)("div",{className:"flex flex-row my-2 gap-x-4",children:(0,n.jsxs)("p",{className:"text-gray-500",children:["score: ",t]})}),(0,n.jsx)("div",{className:"flex flex-row items-center justify-center gap-x-2",children:(0,n.jsxs)("p",{children:[N.reduce((e,t,r)=>0===r?t.text:r===N.length-1?"".concat(t.text," \uD83D\uDE35 ").concat(e):"".concat(t.text," \uD83E\uDD1C ").concat(e),"")," "]})}),(0,n.jsx)("button",{className:"mt-2  border bg-green-300 p-2 text-sm",onClick:()=>{D(u.ki);let e=N.reduce((e,t,r)=>0===r?t.text:r===N.length-1?"".concat(t.text," \uD83D\uDE35 ").concat(e):"".concat(t.text," \uD83E\uDD1C ").concat(e),""),r=navigator,s="my whatbeatsrock.com score: "+t+"\n"+e;r.canShare&&r.canShare({url:window.location.href,title:"WhatBeatsRock.com Score",text:s})?navigator.share({url:window.location.href,title:"WhatBeatsRock.com Score",text:s}):(navigator.clipboard.writeText(s),alert("Copied!\n".concat(e,"\n Share with friends")))},children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-x-1",children:[(0,n.jsx)("p",{children:"Share"}),(0,n.jsx)(i.eA8,{})]})}),(0,n.jsx)("div",{className:"pt-4 pb-2 text-gray-400",children:"Your initials"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A({score:t,text:"".concat(N[N.length-1].text.trim()," ").concat(N[N.length-1].emoji," did not beat ").concat(N[N.length-2].text.trim()," ").concat(N[N.length-2].emoji),initials:h})},children:[(0,n.jsx)("input",{className:"px-4 py-2 text-lg border border-1-black uppercase",defaultValue:h,placeholder:"AAA",disabled:s,onChange:e=>{g(e.target.value.toUpperCase())}}),(0,n.jsx)("button",{type:"submit",className:"p-2 border border-1-black text-lg ".concat(s||!h?"text-gray-400":""),disabled:s||!h,children:"submit score"})]})]}),!("GUESS"===R&&1===N.length)&&(0,n.jsx)("div",{className:"fixed bottom-0 bg-white p-2 w-full text-center",children:(0,n.jsx)(f.P,{})})]})})}},7430:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var s=r(2265);function n(e){(0,s.useEffect)(e,[])}},2776:function(e,t,r){"use strict";r.d(t,{P:function(){return a}});var s=r(7437),n=r(7138);function a(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsxs)("div",{children:["follow the creators"," ",(0,s.jsx)(n.default,{className:"underline",href:"https://x.com/dragon_khoi",target:"_blank",children:"khoi\uD83D\uDC1F"})," & ",(0,s.jsx)(n.default,{className:"underline",href:"https://x.com/qualiaspace",target:"_blank",children:"kyle\uD83E\uDD6C"})]}),(0,s.jsxs)("div",{children:["join the community on"," ",(0,s.jsx)(n.default,{className:"underline",href:"https://discord.gg/bjbHyFEyWv",target:"_blank",children:"discord \uD83D\uDCAC"})]})]})}},9354:function(e,t,r){"use strict";r.d(t,{$q:function(){return l},BP:function(){return n},G2:function(){return h},KI:function(){return x},SH:function(){return o},Vg:function(){return p},Ym:function(){return s},a_:function(){return d},f_:function(){return m},gv:function(){return f},ki:function(){return u},nV:function(){return a},qw:function(){return c},wC:function(){return i}});let s="___",n="OAI_SORRY_ERROR",a="TRY_AGAIN_ERROR",l="CHILL",c="L_FILTER_ERROR",i="INITIALS_ERROR",o="WEIRD_ERROR",u="share_button",x="submit_guess",d="submit_score",m="api_timeout",h="America/Los_Angeles",p=/(?:\uD83C[\uDDE6-\uDDFF])|(?:\uD83D[\uDC00-\uDE4F\uDE80-\uDEFF])|(?:\uD83E[\uDD00-\uDDFF])|[\u2600-\u27BF]|[\uD83C-\uDBFF\uDC00-\uDFFF]/g;function f(){let e=new Date(new Date().toLocaleString("en-US",{timeZone:h})),t=(8-e.getDay())%7;return e.setDate(e.getDate()+(0===t?7:t)),e.setHours(0,0,0,0),e}}},function(e){e.O(0,[603,310,138,971,23,744],function(){return e(e.s=8350)}),_N_E=e.O()}]);